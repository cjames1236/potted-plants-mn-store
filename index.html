<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Potted Kitchen ‚Äî MN-Compliant Hemp Gummies</title>
  <meta name="description" content="Minnesota-compliant hemp-derived Œî9 gummies. Third-party tested. MN shipping only." />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- PDF.js (only if we need to render a COA page into the hero) -->
  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc =
      "https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.worker.min.js";
  </script>

  <!-- QR code for the COA -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

  <style>
    :root{
      --brand-primary:#166534; --brand-primary-dark:#14532D;
      --chip-bg:#ECFDF5; --chip-border:#A7F3D0; --chip-text:#065F46;
      --hero-from:#F2FBF5; --hero-to:#FFF7F0;
    }
    .card{border-radius:1.25rem;border:1px solid #e5e7eb;background:#fff}
    .btn{border-radius:1rem;padding:.6rem 1rem;font-size:.9rem}
    .btn-primary{background:var(--brand-primary);color:#fff}.btn-primary:hover{background:var(--brand-primary-dark)}
    .btn-ghost{border:1px solid #e5e7eb;background:#fff}.btn-ghost:hover{background:#f8fafc}
    .chip{font-size:.75rem;border:1px solid var(--chip-border);border-radius:9999px;padding:.2rem .5rem;background:var(--chip-bg);color:var(--chip-text)}
    .badge{font-size:.72rem;line-height:1;padding:.36rem .6rem;border-radius:999px;background:#ffffffcc;border:1px solid #e5e7eb;color:#065F46;backdrop-filter:saturate(140%) blur(6px)}
  </style>
</head>
<body class="min-h-screen bg-neutral-50 text-neutral-900">

  <script>
    /* ---------- CONFIG (edit as needed) ---------- */
    const BRAND = { name: "Potted Kitchen", tagline: "Minnesota-compliant hemp-derived gummies." };

    const LOGO_URL =
      "https://raw.githubusercontent.com/cjames1236/potted-plants-mn-store/main/snip%20clip%20of%20Potted%20Kitchen%20logo.png";

    const CASH_APP_URL = "https://cash.app/$CurtisGieseke";

    /* ‚úÖ Your approved Stripe Payment Link */
    const STRIPE_LINK = "https://buy.stripe.com/cNi6oJdxgawa4mQ4oW4sE00";

    const PRODUCT = {
      id: "mn-thc-gummies-10pk",
      name: "Hemp-Derived Œî9 Gummies",
      desc: "Each gummy contains 2.2mg Œî9-THC. 10 gummies per pack (22mg total). MN law compliant (‚â§5mg/serving, ‚â§50mg/package). Third-party tested by Legend Technical Services (ISO/IEC 17025).",
      price: 24.99,
      strengthMg: 2.2,
      count: 10,
      batch: "2400824-01",
      imageFallback: "https://placehold.co/1200x800/png?text=Hemp+%CE%949+Gummies",
      coaUrl: "https://1drv.ms/b/c/dc5c1fb05bd2de17/ERfe0luwH1wggNytEAAAAAABBc6xNatFTT68cmIluAhg9A?e=HJCaQQ"
    };

    window.currentHeroURL = PRODUCT.imageFallback;
  </script>

  <!-- NAV -->
  <nav class="sticky top-0 z-30 bg-white/90 backdrop-blur border-b">
    <div class="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-2 font-semibold text-lg">
        <img id="logo" class="h-9 w-auto object-contain rounded-sm" alt="logo">
        <span class="text-emerald-800" id="brand-name"></span>
      </div>
      <a href="#cart" class="btn btn-ghost">üõí Cart <span id="cart-count" class="ml-1 text-xs bg-emerald-600 text-white rounded-full px-1.5">0</span></a>
    </div>
  </nav>

  <!-- HERO -->
  <header class="bg-gradient-to-br" style="background-image:linear-gradient(135deg,var(--hero-from),var(--hero-to))">
    <div class="mx-auto max-w-6xl px-4 py-16 grid md:grid-cols-2 gap-10 items-center">
      <div>
        <h1 class="text-3xl sm:text-4xl font-extrabold leading-tight text-emerald-800">Minnesota-Compliant Hemp Gummies</h1>
        <p class="mt-3 text-neutral-700" id="tagline"></p>
        <div class="mt-6 flex flex-wrap gap-3 text-sm text-neutral-700">
          <span class="chip">‚â§ 5 mg/serv ‚Ä¢ ‚â§ 50 mg/pkg</span>
          <span class="chip">21+ only</span>
          <span class="chip">MN shipping only</span>
          <button id="open-coa-hero" class="btn btn-ghost">View COA</button>
        </div>
      </div>
      <div id="hero-img" class="aspect-[4/3] rounded-3xl bg-neutral-100 shadow-inner"></div>
    </div>
  </header>

  <!-- POLICY -->
  <section id="policy" class="mx-auto max-w-6xl px-4 py-8">
    <div class="card p-5 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4">
      <div class="flex-1">
        <h3 class="font-semibold">Shipping, Age & Compliance ‚Äî Minnesota</h3>
        <ul class="list-disc pl-5 text-sm text-neutral-700 space-y-1">
          <li>21+ only; valid ID required.</li>
          <li>‚â§ 5 mg THC per serving; ‚â§ 50 mg per package.</li>
          <li>Child-resistant, tamper-evident, opaque packaging. Keep out of reach of children.</li>
        </ul>
      </div>
      <div class="flex items-center gap-2 w-full md:w-auto">
        <label class="text-sm">Ship to:</label>
        <select id="state" class="w-full md:w-56 rounded-xl border px-3 py-2 text-sm"></select>
      </div>
      <div id="state-msg" class="text-sm"></div>
    </div>
  </section>

  <!-- SHOP -->
  <section id="products" class="mx-auto max-w-6xl px-4 py-8">
    <h2 class="text-2xl font-bold mb-6">Shop</h2>
    <div class="grid sm:grid-cols-2 gap-6">
      <article class="card p-5">
        <!-- TRUST BLOCK (COA preview + QR) -->
        <figure class="rounded-2xl border bg-white p-4 flex items-center gap-4">
          <div class="flex-1 text-sm">
            <div class="font-semibold flex items-center gap-2">
              ‚úÖ COA Verified
              <span class="inline-block ml-2 px-2 py-1 rounded-full border text-emerald-800">
                <span id="p-strength"></span> mg Œî9 per gummy
              </span>
            </div>
            <ul class="mt-2 space-y-1 text-neutral-700">
              <li>Total THC / package: <strong id="p-total"></strong> mg</li>
              <li>Batch / Lot: <span id="p-batch2"></span></li>
              <li>Lab: Legend Technical Services (ISO/IEC 17025)</li>
            </ul>
            <button id="open-coa-card" class="btn btn-ghost mt-3">View full COA</button>
          </div>
          <div class="shrink-0 text-center">
            <canvas id="coa-qr" width="128" height="128" class="rounded-md border bg-white"></canvas>
            <div class="text-[10px] text-neutral-500 mt-1">Scan for COA</div>
          </div>
        </figure>

        <h3 class="font-semibold text-lg mt-4" id="p-name"></h3>
        <p class="text-sm text-neutral-600" id="p-desc"></p>
        <p class="mt-2 text-sm"><strong id="p-serve"></strong></p>
        <p class="text-sm">Batch #: <span id="p-batch"></span></p>

        <div class="mt-4 flex flex-col sm:flex-row sm:items-center gap-2">
          <div class="text-xl font-bold sm:mr-auto" id="p-price"></div>
          <button id="add" class="btn btn-primary w-full sm:w-auto">Add to Cart</button>

          <!-- Cash App -->
          <a id="pay-cashapp" target="_blank" rel="noreferrer"
             class="btn btn-ghost w-full sm:w-auto"
             style="border-color:var(--brand-primary);color:var(--brand-primary)">
            Pay with Cash App
          </a>

          <!-- Stripe (shown only if STRIPE_LINK set) -->
          <a id="stripe" target="_blank" rel="noreferrer"
             class="hidden btn btn-ghost w-full sm:w-auto">
            Buy Now (Stripe)
          </a>
        </div>
        <div class="mt-2">
          <span id="mn-note" class="text-xs text-amber-700 hidden">Select Minnesota to enable checkout.</span>
        </div>
      </article>
    </div>
  </section>

  <!-- SHIPPING & RETURNS -->
  <section id="shipping-returns" class="mx-auto max-w-6xl px-4 py-12">
    <h3 class="text-2xl font-bold mb-6">Shipping & Returns</h3>
    <div class="card p-6 space-y-6 text-sm text-neutral-800">
      <div>
        <p class="font-semibold">Where we ship</p>
        <p class="mt-1">We currently ship within <span class="font-medium">Minnesota</span> only. Orders process in 1‚Äì2 business days. Adult (21+) signature may be required at delivery.</p>
      </div>
      <div>
        <p class="font-semibold">Return policy (14 days)</p>
        <ul class="list-disc pl-5 mt-1 space-y-1">
          <li>Returns accepted within <span class="font-medium">14 days</span> of delivery for unopened products in original, tamper-evident packaging.</li>
          <li>Opened ingestible products are not returnable unless defective or damaged in transit.</li>
          <li>To start a return, contact us with your order number and photos if applicable. We‚Äôll issue an RMA and instructions.</li>
          <li>Refunds go to the original payment method after inspection. Shipping fees are non-refundable.</li>
        </ul>
      </div>
      <div class="text-xs text-neutral-600">Not legal advice. Policies may update to comply with Minnesota law.</div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="border-t bg-white">
    <div class="mx-auto max-w-6xl px-4 py-10 grid md:grid-cols-4 gap-6 text-sm">
      <div>
        <div class="font-semibold flex items-center gap-2">üç≥ Potted Kitchen</div>
        <p class="mt-2 text-neutral-600">¬© <span id="year"></span> Potted Kitchen. All rights reserved.</p>
      </div>
      <div>
        <p class="font-semibold">Company</p>
        <ul class="mt-2 space-y-1 text-neutral-700">
          <li><a href="#policy" class="hover:underline">Compliance</a></li>
          <li><a href="#shipping-returns" class="hover:underline">Shipping & Returns</a></li>
        </ul>
      </div>
      <div>
        <p class="font-semibold">Legal</p>
        <ul class="mt-2 space-y-1 text-neutral-700">
          <li><a href="#" class="hover:underline">Terms of Service</a></li>
          <li><a href="#" class="hover:underline">Privacy Policy</a></li>
          <li><a href="#" class="hover:underline">Refund Policy</a></li>
        </ul>
      </div>
      <div class="text-neutral-600">
        <p class="font-semibold">Disclaimers</p>
        <p class="mt-2">These statements have not been evaluated by the FDA and are not intended to diagnose, treat, cure, or prevent any disease. Not for sale to persons under 21. Keep out of reach of children and pets.</p>
        <p class="mt-2 text-xs">Manufactured by Potted Kitchen LLC ‚Äî Savage, Minnesota. Batch/lot on label. COA available via link.</p>
      </div>
    </div>
  </footer>

  <!-- CART -->
  <aside id="drawer" class="fixed inset-y-0 right-0 w-full max-w-md bg-white shadow-2xl translate-x-full transition-transform">
    <div class="h-full flex flex-col">
      <div class="p-4 border-b flex items-center justify-between">
        <h4 class="font-semibold">Your Cart</h4>
        <button class="btn btn-ghost" onclick="closeCart()">‚úï</button>
      </div>
      <div class="flex-1 overflow-auto p-4 space-y-3" id="cart-items"></div>
      <div class="border-t p-4 space-y-3">
        <div class="flex items-center justify-between text-sm"><span>Subtotal</span><span id="subtotal" class="font-semibold">$0.00</span></div>
        <p class="text-xs text-neutral-500">Taxes/shipping at payment.</p>
        <button id="checkout" class="btn btn-primary w-full">Pay with Cash App</button>
      </div>
    </div>
  </aside>

  <!-- COA MODAL -->
  <div id="coa" class="fixed inset-0 hidden items-center justify-center bg-black/50 p-4">
    <div class="max-w-lg w-full card p-6">
      <div class="flex items-center justify-between">
        <h4 class="font-semibold">Certificate of Analysis</h4>
        <button class="btn btn-ghost" onclick="toggleCOA(false)">‚úï</button>
      </div>
      <p class="text-sm mt-2">Batch <span id="coa-batch"></span> tested by Legend Technical Services, St Paul, MN.</p>
      <a id="coa-link" class="btn btn-ghost mt-4" target="_blank" rel="noreferrer">Open COA PDF</a>
    </div>
  </div>

  <!-- AGE GATE -->
  <div id="age" class="fixed inset-0 hidden items-center justify-center bg-black/60 p-4">
    <div class="max-w-md w-full card p-6 text-center space-y-4">
      <h4 class="text-xl font-bold">Are you 21 or older?</h4>
      <p class="text-sm text-neutral-700">You must be of legal age to enter this site and purchase hemp-derived products in Minnesota.</p>
      <div class="grid grid-cols-2 gap-3">
        <button class="btn btn-ghost" onclick="location.href='https://www.google.com'">No</button>
        <button class="btn btn-primary" onclick="verifyAge()">Yes, I am 21+</button>
      </div>
      <p class="text-xs text-neutral-500">By entering, you acknowledge our Terms and Privacy Policy.</p>
    </div>
  </div>

  <!-- MAIN JS (vanilla) -->
  <script>
    const $ = s => document.querySelector(s);
    const fmt = n => n.toLocaleString("en-US",{style:"currency",currency:"USD"});

    // Init text/logo
    $('#logo').src = LOGO_URL;
    $('#brand-name').textContent = BRAND.name;
    $('#tagline').textContent = BRAND.tagline;
    $('#year').textContent = new Date().getFullYear();

    // Product text
    $('#p-name').textContent = PRODUCT.name;
    $('#p-desc').textContent = PRODUCT.desc;
    $('#p-serve').textContent = `${PRODUCT.strengthMg} mg Œî9-THC per gummy √ó ${PRODUCT.count} gummies = ${PRODUCT.strengthMg * PRODUCT.count} mg total`;
    $('#p-batch').textContent = PRODUCT.batch;
    $('#p-price').textContent = fmt(PRODUCT.price);
    $('#p-strength').textContent = PRODUCT.strengthMg.toString();
    $('#p-total').textContent = (PRODUCT.strengthMg * PRODUCT.count).toString();
    $('#p-batch2').textContent = PRODUCT.batch;
    $('#pay-cashapp').href = CASH_APP_URL;

    // Show Stripe button if link present
    if (STRIPE_LINK) { const el=$('#stripe'); el.classList.remove('hidden'); el.href = STRIPE_LINK; }

    $('#coa-batch').textContent = PRODUCT.batch;
    $('#coa-link').href = PRODUCT.coaUrl;
    $('#open-coa-hero').onclick = () => toggleCOA(true);
    $('#open-coa-card').onclick = () => toggleCOA(true);

    // QR code
    if (window.QRCode) {
      QRCode.toCanvas(document.getElementById('coa-qr'), PRODUCT.coaUrl, { width:128, margin:1 }, ()=>{});
    }

    // State select (MN only)
    const states=[["","Select state‚Ä¶"],["MN","Minnesota"],["AL","Alabama"],["AK","Alaska"],["AZ","Arizona"],["AR","Arkansas"],["CA","California"],["CO","Colorado"],["CT","Connecticut"],["DE","Delaware"],["FL","Florida"],["GA","Georgia"],["HI","Hawaii"],["ID","Idaho"],["IL","Illinois"],["IN","Indiana"],["IA","Iowa"],["KS","Kansas"],["KY","Kentucky"],["LA","Louisiana"],["ME","Maine"],["MD","Maryland"],["MA","Massachusetts"],["MI","Michigan"],["MS","Mississippi"],["MO","Missouri"],["MT","Montana"],["NE","Nebraska"],["NV","Nevada"],["NH","New Hampshire"],["NJ","New Jersey"],["NM","New Mexico"],["NY","New York"],["NC","North Carolina"],["ND","North Dakota"],["OH","Ohio"],["OK","Oklahoma"],["OR","Oregon"],["PA","Pennsylvania"],["RI","Rhode Island"],["SC","South Carolina"],["SD","South Dakota"],["TN","Tennessee"],["TX","Texas"],["UT","Utah"],["VT","Vermont"],["VA","Virginia"],["WA","Washington"],["WV","West Virginia"],["WI","Wisconsin"],["WY","Wyoming"],["DC","District of Columbia"]];
    const sel=$('#state'); states.forEach(([v,t])=>{const o=document.createElement('option');o.value=v;o.textContent=t;sel.appendChild(o);});
    let selectedState="";
    sel.addEventListener('change',()=>{
      selectedState=sel.value; const msg=$('#state-msg');
      if(!selectedState){msg.textContent="";$('#mn-note').classList.add('hidden');return;}
      if(selectedState!=="MN"){msg.textContent="‚ö†Ô∏è We currently ship only within Minnesota.";msg.className="text-amber-700 text-sm";$('#mn-note').classList.remove('hidden');}
      else{msg.textContent="‚úî Minnesota shipping available.";msg.className="text-green-700 text-sm";$('#mn-note').classList.add('hidden');}
    });

    // Cart
    const cart=[];
    function openCart(){ $('#drawer').style.transform='translateX(0)'; }
    function closeCart(){ $('#drawer').style.transform='translateX(100%)'; }
    function renderCart(){
      $('#cart-count').textContent = cart.reduce((s,i)=>s+i.qty,0);
      const wrap=$('#cart-items'); wrap.innerHTML=''; let total=0;
      cart.forEach(item=>{
        total += PRODUCT.price * item.qty;
        const row=document.createElement('div');
        row.className='card p-3 flex gap-3';
        const imgURL = window.currentHeroURL || PRODUCT.imageFallback;
        row.innerHTML=`
          <div class="h-16 w-16 rounded-lg bg-neutral-100" style="background-image:url('${imgURL}');background-size:cover;background-position:center"></div>
          <div class="flex-1">
            <p class="font-medium">${PRODUCT.name}</p>
            <p class="text-xs text-neutral-600">MN-compliant</p>
            <div class="mt-2 flex items-center gap-2">
              <button class="btn btn-ghost" data-delta="-1">‚àí</button>
              <span>${item.qty}</span>
              <button class="btn btn-ghost" data-delta="+1">+</button>
            </div>
          </div>
          <div class="text-right">
            <div class="font-semibold">${fmt(PRODUCT.price * item.qty)}</div>
            <button class="text-xs text-neutral-500 hover:underline" data-remove>Remove</button>
          </div>`;
        row.querySelector('[data-delta="-1"]').onclick=()=>{ item.qty=Math.max(1,item.qty-1); renderCart(); };
        row.querySelector('[data-delta="+1"]').onclick=()=>{ item.qty=item.qty+1; renderCart(); };
        row.querySelector('[data-remove]').onclick=()=>{ cart.splice(cart.indexOf(item),1); renderCart(); };
        wrap.appendChild(row);
      });
      $('#subtotal').textContent = fmt(total);
    }
    document.querySelector('a[href="#cart"]').addEventListener('click',(e)=>{ e.preventDefault(); openCart(); });
    document.getElementById('add').addEventListener('click', ()=>{ const f=cart.find(i=>i.id===PRODUCT.id); if(f) f.qty+=1; else cart.push({id:PRODUCT.id,qty:1}); renderCart(); openCart(); });

    // Cash App checkout button
    document.getElementById('checkout').addEventListener('click', ()=>{
      if(!cart.length) return;
      if(sel.value!=="MN"){ alert("We ship within Minnesota only. Select MN to proceed."); return; }
      const total = cart.reduce((s,i)=>s + PRODUCT.price * i.qty, 0);
      const orderId = "PK-" + Math.random().toString(36).slice(2,8).toUpperCase();
      const note = `Order ${orderId} ‚Äî ${PRODUCT.name} x ${cart[0].qty} @ ${fmt(PRODUCT.price)} ‚Äî Total ${fmt(total)} ‚Äî Ship: MN`;
      try { navigator.clipboard?.writeText(note); } catch {}
      alert(`Copy this into your Cash App note before paying:\n\n${note}`);
      window.open(CASH_APP_URL, "_blank");
    });

    // Make the Pay with Cash App button behave
    document.getElementById('pay-cashapp').addEventListener('click', (e)=>{
      e.preventDefault();
      if(!cart.length){ cart.push({id:PRODUCT.id, qty:1}); renderCart(); }
      document.getElementById('checkout').click();
    });

    // Stripe button: enforce MN shipping
    document.getElementById('stripe').addEventListener('click', (e)=>{
      if (!STRIPE_LINK) return;
      if (sel.value !== "MN") {
        e.preventDefault();
        const msg = document.getElementById("state-msg");
        if (msg) { msg.textContent = "Select Minnesota to proceed to checkout."; msg.className = "text-amber-700 text-sm"; }
        openCart();
      }
    });

    // COA modal + Age gate
    function toggleCOA(show=true){ const c=$('#coa'); c.style.display=show?'flex':'none'; }
    function showAgeGate(){ const g=$('#age'); g.style.display='flex'; }
    function verifyAge(){ localStorage.setItem('hemp_age_verified','true'); $('#age').style.display='none'; }
    window.verifyAge=verifyAge; window.closeCart=closeCart; window.toggleCOA=toggleCOA;
    if(localStorage.getItem('hemp_age_verified')!=='true') showAgeGate();

    // HERO IMAGE PIPELINE (one image total; hero only)
    (async function setHeroImage(){
      const hero = $('#hero-img');
      function setBG(url){
        hero.style.backgroundImage = `url('${url}')`;
        hero.style.backgroundSize = 'cover';
        hero.style.backgroundPosition = 'center';
        window.currentHeroURL = url;
      }
      async function tryImg(url){
        return await new Promise(res=>{
          const i=new Image(); i.onload=()=>res(true); i.onerror=()=>res(false); i.src=url+"?v="+Date.now();
        });
      }
      const candidates = [
        "/assets/gummies-hero.jpg",
        "/assets/gummies-hero.png",
        "https://raw.githubusercontent.com/cjames1236/potted-plants-mn-store/main/assets/gummies-hero.jpg",
        "https://raw.githubusercontent.com/cjames1236/potted-plants-mn-store/main/assets/gummies-hero.png",
      ];
      for (const c of candidates){ if (await tryImg(c)) { setBG(c); return; } }
      async function renderPdf(url){
        try{
          const pdf = await pdfjsLib.getDocument({ url }).promise;
          const page = await pdf.getPage(1);
          const viewport = page.getViewport({ scale: 1.8 });
          const canvas = document.createElement('canvas');
          const ctx = canvas.getContext('2d');
          canvas.width = viewport.width; canvas.height = viewport.height;
          await page.render({ canvasContext: ctx, viewport }).promise;
          setBG(canvas.toDataURL('image/png')); return true;
        }catch{ return false; }
      }
      if (await renderPdf("/assets/legend-coa.pdf")) return;
      if (await renderPdf(PRODUCT.coaUrl)) return;
      setBG(PRODUCT.imageFallback);
    })();

    // SMART BUY LINKS (?buy=...&qty=...&state=MN&open=cart&checkout=cashapp|stripe)
    (function smartBuyLinks(){
      try {
        const qs = new URLSearchParams(location.search);
        const buy = qs.get("buy");
        if (!buy || buy !== PRODUCT.id) return;

        const qty = Math.max(1, parseInt(qs.get("qty") || "1", 10));
        const desiredState = qs.get("state");
        const open = qs.get("open");
        const checkout = qs.get("checkout"); // "cashapp" | "stripe"

        // Preselect state
        if (desiredState) {
          sel.value = desiredState;
          sel.dispatchEvent(new Event("change"));
        }

        // Add to cart / merge
        const existing = cart.find(i => i.id === PRODUCT.id);
        if (existing) existing.qty += qty; else cart.push({ id: PRODUCT.id, qty });
        renderCart();

        if (open === "cart") openCart();

        if (checkout === "cashapp") {
          if (sel.value === "MN") document.getElementById("checkout").click();
          else {
            const msg = document.getElementById("state-msg");
            if (msg) { msg.textContent = "Select Minnesota to proceed to checkout."; msg.className = "text-amber-700 text-sm"; }
            openCart();
          }
        }

        if (checkout === "stripe" && STRIPE_LINK) {
          if (sel.value === "MN") window.open(STRIPE_LINK, "_blank");
          else {
            const msg = document.getElementById("state-msg");
            if (msg) { msg.textContent = "Select Minnesota to proceed to checkout."; msg.className = "text-amber-700 text-sm"; }
            openCart();
          }
        }
      } catch {/* ignore */}
    })();
  </script>
</body>
</html>
